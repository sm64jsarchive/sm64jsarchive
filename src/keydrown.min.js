/*! keydrown - v1.2.7 - 2020-10-01 - http://jeremyckahn.github.com/keydrown */

!function(a){var p=function(){var n={forEach:function(n,e){for(var t in n)n.hasOwnProperty(t)&&e(n[t],t)}},e=n.forEach;n.getTranspose=function(n){var t={};return e(n,function(n,e){t[n]=e}),t},n.indexOf=function(n,e){if(n.indexOf)return n.indexOf(e);for(var t=n.length,o=0;o<t;o++)if(n[o]===e)return o;return-1};var t=n.indexOf;return n.pushUnique=function(n,e){return-1===t(n,e)&&(n.push(e),!0)},n.removeValue=function(n,e){e=t(n,e);if(-1!==e)return n.splice(e,1)[0]},n.documentOn=function(n,e){a.addEventListener?a.addEventListener(n,e,!1):document.attachEvent&&document.attachEvent("on"+n,e)},n.requestAnimationFrame=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||function(n){a.setTimeout(n,1e3/60)},n.noop=function(){},n}(),n={ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ENTER:13,SHIFT:16,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8,DELETE:46,TAB:9,TILDE:192,CTRL:17},s=p.getTranspose(n),e=[],t=function(){"use strict";function n(n){this.keyCode=n,this.cachedKeypressEvent=null}function t(n,e,t,o){t?n[e]=t:n[e](o)}return n.prototype._downHandler=p.noop,n.prototype._upHandler=p.noop,n.prototype._pressHandler=p.noop,n.prototype.isDown=function(){return-1!==p.indexOf(e,this.keyCode)},n.prototype.down=function(n){t(this,"_downHandler",n,this.cachedKeypressEvent)},n.prototype.up=function(n,e){t(this,"_upHandler",n,e)},n.prototype.press=function(n,e){this.cachedKeypressEvent=e,t(this,"_pressHandler",n,e)},n.prototype.unbindDown=function(){this._downHandler=p.noop},n.prototype.unbindUp=function(){this._upHandler=p.noop},n.prototype.unbindPress=function(){this._pressHandler=p.noop},n}(),o=function(r){"use strict";var u={};u.Key=t;var o=!1,i=Date.now?Date.now:function(){return+new Date},c=i();return u.tick=function(){for(var n=r.length,e=0;e<n;e++){var t=r[e],t=s[t];t&&u[t].down()}},u.run=function(n){o=!0;var e=i(),t=e-c;p.requestAnimationFrame.call(a,function(){o&&(u.run(n),n(t,e))}),c=e},u.stop=function(){o=!1},p.forEach(n,function(n,e){u[e]=new t(n)}),p.documentOn("keydown",function(n){var e=n.keyCode,t=s[e],o=p.pushUnique(r,e),e=u[t];e&&(((t=e.cachedKeypressEvent||{}).ctrlKey||t.shiftKey||t.metaKey)&&(o=!0),o&&e.press(null,n))}),p.documentOn("keyup",function(n){var e=p.removeValue(r,n.keyCode),e=s[e];e&&u[e].up(null,n)}),p.documentOn("blur",function(n){p.forEach(r,function(n){n=s[n];n&&u[n].up()}),r.length=0}),u}(e);"object"==typeof module&&"object"==typeof module.exports?module.exports=o:"function"==typeof define&&define.amd?define(function(){return o}):a.kd=o}(window);